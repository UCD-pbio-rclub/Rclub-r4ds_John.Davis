# 07_19_2017
John D.  
July 14, 2017  



# 14.4 Tools

## 14.4.1 Detect matches


```r
library(tidyverse)
```

```
## Loading tidyverse: ggplot2
## Loading tidyverse: tibble
## Loading tidyverse: tidyr
## Loading tidyverse: readr
## Loading tidyverse: purrr
## Loading tidyverse: dplyr
```

```
## Conflicts with tidy packages ----------------------------------------------
```

```
## filter(): dplyr, stats
## lag():    dplyr, stats
```

```r
library(stringr)
x <- c("apple", "banana", "pear")
str_detect(x, "e")
```

```
## [1]  TRUE FALSE  TRUE
```

```r
sum(str_detect(words, "^t"))
```

```
## [1] 65
```

```r
mean(str_detect(words, "[aeiou]$"))
```

```
## [1] 0.2765306
```

```r
no_vowels_1 <- !str_detect(words, "[aeiou]")

no_vowels_2 <- str_detect(words, "^[^aeiou]+$")
identical(no_vowels_1, no_vowels_2)
```

```
## [1] TRUE
```

```r
words[str_detect(words, "x$")]
```

```
## [1] "box" "sex" "six" "tax"
```

```r
str_subset(words, "x$")
```

```
## [1] "box" "sex" "six" "tax"
```

```r
df <- tibble(
  word = words, 
  i = seq_along(word)
)
df %>% 
  filter(str_detect(words, "x$"))
```

```
## # A tibble: 4 x 2
##    word     i
##   <chr> <int>
## 1   box   108
## 2   sex   747
## 3   six   772
## 4   tax   841
```

```r
x <- c("apple", "banana", "pear")
str_count(x, "a")
```

```
## [1] 1 3 1
```

```r
mean(str_count(words, "[aeiou]"))
```

```
## [1] 1.991837
```

```r
df %>% 
  mutate(
    vowels = str_count(word, "[aeiou]"),
    consonants = str_count(word, "[^aeiou]")
  )
```

```
## # A tibble: 980 x 4
##        word     i vowels consonants
##       <chr> <int>  <int>      <int>
##  1        a     1      1          0
##  2     able     2      2          2
##  3    about     3      3          2
##  4 absolute     4      4          4
##  5   accept     5      2          4
##  6  account     6      3          4
##  7  achieve     7      4          3
##  8   across     8      2          4
##  9      act     9      1          2
## 10   active    10      3          3
## # ... with 970 more rows
```

```r
str_count("abababa", "aba")
```

```
## [1] 2
```

```r
#str_view_all("abababa", "aba")
```

### 14.4.2 Exercises

1. For each of the following challenges, try solving it by using both a single regular expression, and a combination of multiple `str_detect()` calls.

    1. Find all words that start or end with x.
    
    
    ```r
    words[str_detect(words, "^x|x$")]
    ```
    
    ```
    ## [1] "box" "sex" "six" "tax"
    ```
    
    ```r
    words[str_detect(words,"^x") | str_detect(words,"x$")]
    ```
    
    ```
    ## [1] "box" "sex" "six" "tax"
    ```

    2. Find all words that start with a vowel and end with a consonant
    
    
    ```r
    words[str_detect(words, "^[aeiou].*[^aeiou]$")]
    ```
    
    ```
    ##   [1] "about"       "accept"      "account"     "across"      "act"        
    ##   [6] "actual"      "add"         "address"     "admit"       "affect"     
    ##  [11] "afford"      "after"       "afternoon"   "again"       "against"    
    ##  [16] "agent"       "air"         "all"         "allow"       "almost"     
    ##  [21] "along"       "already"     "alright"     "although"    "always"     
    ##  [26] "amount"      "and"         "another"     "answer"      "any"        
    ##  [31] "apart"       "apparent"    "appear"      "apply"       "appoint"    
    ##  [36] "approach"    "arm"         "around"      "art"         "as"         
    ##  [41] "ask"         "at"          "attend"      "authority"   "away"       
    ##  [46] "awful"       "each"        "early"       "east"        "easy"       
    ##  [51] "eat"         "economy"     "effect"      "egg"         "eight"      
    ##  [56] "either"      "elect"       "electric"    "eleven"      "employ"     
    ##  [61] "end"         "english"     "enjoy"       "enough"      "enter"      
    ##  [66] "environment" "equal"       "especial"    "even"        "evening"    
    ##  [71] "ever"        "every"       "exact"       "except"      "exist"      
    ##  [76] "expect"      "explain"     "express"     "identify"    "if"         
    ##  [81] "important"   "in"          "indeed"      "individual"  "industry"   
    ##  [86] "inform"      "instead"     "interest"    "invest"      "it"         
    ##  [91] "item"        "obvious"     "occasion"    "odd"         "of"         
    ##  [96] "off"         "offer"       "often"       "okay"        "old"        
    ## [101] "on"          "only"        "open"        "opportunity" "or"         
    ## [106] "order"       "original"    "other"       "ought"       "out"        
    ## [111] "over"        "own"         "under"       "understand"  "union"      
    ## [116] "unit"        "university"  "unless"      "until"       "up"         
    ## [121] "upon"        "usual"
    ```
    
    ```r
    words[str_detect(words, "^[aeiou]") & str_detect(words, "[^aeiou]$")]
    ```
    
    ```
    ##   [1] "about"       "accept"      "account"     "across"      "act"        
    ##   [6] "actual"      "add"         "address"     "admit"       "affect"     
    ##  [11] "afford"      "after"       "afternoon"   "again"       "against"    
    ##  [16] "agent"       "air"         "all"         "allow"       "almost"     
    ##  [21] "along"       "already"     "alright"     "although"    "always"     
    ##  [26] "amount"      "and"         "another"     "answer"      "any"        
    ##  [31] "apart"       "apparent"    "appear"      "apply"       "appoint"    
    ##  [36] "approach"    "arm"         "around"      "art"         "as"         
    ##  [41] "ask"         "at"          "attend"      "authority"   "away"       
    ##  [46] "awful"       "each"        "early"       "east"        "easy"       
    ##  [51] "eat"         "economy"     "effect"      "egg"         "eight"      
    ##  [56] "either"      "elect"       "electric"    "eleven"      "employ"     
    ##  [61] "end"         "english"     "enjoy"       "enough"      "enter"      
    ##  [66] "environment" "equal"       "especial"    "even"        "evening"    
    ##  [71] "ever"        "every"       "exact"       "except"      "exist"      
    ##  [76] "expect"      "explain"     "express"     "identify"    "if"         
    ##  [81] "important"   "in"          "indeed"      "individual"  "industry"   
    ##  [86] "inform"      "instead"     "interest"    "invest"      "it"         
    ##  [91] "item"        "obvious"     "occasion"    "odd"         "of"         
    ##  [96] "off"         "offer"       "often"       "okay"        "old"        
    ## [101] "on"          "only"        "open"        "opportunity" "or"         
    ## [106] "order"       "original"    "other"       "ought"       "out"        
    ## [111] "over"        "own"         "under"       "understand"  "union"      
    ## [116] "unit"        "university"  "unless"      "until"       "up"         
    ## [121] "upon"        "usual"
    ```

    3. Are there any words that contain at least one of each different vowel?
    
    
    ```r
    ### Test  
    test <- c("allotetraploid","autotetraploidy")
    test[str_detect(sapply(test, function(x) paste(sort(unlist(str_split(x,""))), collapse = "")),"a{1,}.*e{1,}.*i{1,}.*o{1,}.*u")]
    ```
    
    ```
    ## [1] "autotetraploidy"
    ```
    
    ```r
    ### Actual 
    words[str_detect(sapply(words, function(x) paste(sort(unlist(str_split(x,""))), collapse = "")),"a{1,}.*e{1,}.*i{1,}.*o{1,}.*u")]
    ```
    
    ```
    ## character(0)
    ```
    
    ```r
    words[str_detect(words,"a")&str_detect(words,"e")&str_detect(words,"i")&str_detect(words,"o")&str_detect(words,"u")]
    ```
    
    ```
    ## character(0)
    ```

2. What word has the highest number of vowels? What word has the highest proportion of vowels? (Hint: what is the denominator?)


```r
vowel_wds <- words[which(str_count(words,"[aeiou]") == max(str_count(words,"[aeiou]")))]
vowel_wds
```

```
## [1] "appropriate" "associate"   "available"   "colleague"   "encourage"  
## [6] "experience"  "individual"  "television"
```

```r
vowel_wds[which(str_count(vowel_wds,"[aeiou]")/str_count(vowel_wds,"[a-z]") == max(str_count(vowel_wds,"[aeiou]")/str_count(vowel_wds,"[a-z]")))]
```

```
## [1] "associate" "available" "colleague" "encourage"
```

    A is the shortest word with the highest proportion of vowels in the word object.

## 14.4.3 Extract matches


```r
length(sentences)
```

```
## [1] 720
```

```r
head(sentences)
```

```
## [1] "The birch canoe slid on the smooth planks." 
## [2] "Glue the sheet to the dark blue background."
## [3] "It's easy to tell the depth of a well."     
## [4] "These days a chicken leg is a rare dish."   
## [5] "Rice is often served in round bowls."       
## [6] "The juice of lemons makes fine punch."
```

```r
colours <- c("red", "orange", "yellow", "green", "blue", "purple")
colour_match <- str_c(colours, collapse = "|")
colour_match
```

```
## [1] "red|orange|yellow|green|blue|purple"
```

```r
has_colour <- str_subset(sentences, colour_match)
matches <- str_extract(has_colour, colour_match)
head(matches)
```

```
## [1] "blue" "blue" "red"  "red"  "red"  "blue"
```

```r
more <- sentences[str_count(sentences, colour_match) > 1]
str_view_all(more, colour_match)
```

<!--html_preserve--><div id="htmlwidget-7ce05ace555e41e885fe" style="width:960px;height:auto;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-7ce05ace555e41e885fe">{"x":{"html":"<ul>\n  <li>It is hard to erase <span class='match'>blue<\/span> or <span class='match'>red<\/span> ink.<\/li>\n  <li>The <span class='match'>green<\/span> light in the brown box flicke<span class='match'>red<\/span>.<\/li>\n  <li>The sky in the west is tinged with <span class='match'>orange<\/span> <span class='match'>red<\/span>.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

```r
str_extract(more, colour_match)
```

```
## [1] "blue"   "green"  "orange"
```

```r
str_extract_all(more, colour_match)
```

```
## [[1]]
## [1] "blue" "red" 
## 
## [[2]]
## [1] "green" "red"  
## 
## [[3]]
## [1] "orange" "red"
```

```r
str_extract_all(more, colour_match, simplify = TRUE)
```

```
##      [,1]     [,2] 
## [1,] "blue"   "red"
## [2,] "green"  "red"
## [3,] "orange" "red"
```

```r
x <- c("a", "a b", "a b c")
str_extract_all(x, "[a-z]", simplify = TRUE)
```

```
##      [,1] [,2] [,3]
## [1,] "a"  ""   ""  
## [2,] "a"  "b"  ""  
## [3,] "a"  "b"  "c"
```

### 14.4.3.1 Exercises

1.In the previous example, you might have noticed that the regular expression matched “flickered”, which is not a colour. Modify the regex to fix the problem


```r
more <- sentences[str_count(sentences, colour_match) > 1]
colours <- c("\\b(red", "orange", "yellow", "green", "blue", "purple)\\b")
colour_match <- str_c(colours, collapse = "|")
colour_match
```

```
## [1] "\\b(red|orange|yellow|green|blue|purple)\\b"
```

```r
str_extract_all(more, colour_match, simplify = TRUE)
```

```
##      [,1]     [,2] 
## [1,] "blue"   "red"
## [2,] "green"  ""   
## [3,] "orange" "red"
```

2. From the Harvard sentences data, extract:
    1. The first word from each sentence
    
    
    ```r
    first <- "^\\w*"
    str_extract(sentences, first)
    ```
    
    ```
    ##   [1] "The"        "Glue"       "It"         "These"      "Rice"      
    ##   [6] "The"        "The"        "The"        "Four"       "Large"     
    ##  [11] "The"        "A"          "The"        "Kick"       "Help"      
    ##  [16] "A"          "Smoky"      "The"        "The"        "The"       
    ##  [21] "The"        "The"        "Press"      "The"        "The"       
    ##  [26] "Two"        "Her"        "The"        "It"         "Read"      
    ##  [31] "Hoist"      "Take"       "Note"       "Wipe"       "Mend"      
    ##  [36] "The"        "The"        "The"        "The"        "What"      
    ##  [41] "A"          "The"        "Sickness"   "The"        "The"       
    ##  [46] "Lift"       "The"        "Hop"        "The"        "Mesh"      
    ##  [51] "The"        "The"        "Adding"     "The"        "A"         
    ##  [56] "The"        "March"      "A"          "Place"      "Both"      
    ##  [61] "We"         "Use"        "He"         "The"        "A"         
    ##  [66] "Cars"       "The"        "This"       "The"        "Those"     
    ##  [71] "A"          "The"        "The"        "The"        "The"       
    ##  [76] "A"          "The"        "The"        "The"        "The"       
    ##  [81] "The"        "See"        "There"      "The"        "The"       
    ##  [86] "The"        "Cut"        "Men"        "Always"     "He"        
    ##  [91] "The"        "A"          "A"          "The"        "The"       
    ##  [96] "Bail"       "The"        "A"          "Ten"        "The"       
    ## [101] "Oak"        "Cats"       "The"        "Open"       "Add"       
    ## [106] "Thieves"    "The"        "Act"        "The"        "Move"      
    ## [111] "The"        "Leaves"     "The"        "Split"      "Burn"      
    ## [116] "He"         "Weave"      "Hemp"       "A"          "We"        
    ## [121] "Type"       "The"        "The"        "The"        "Paste"     
    ## [126] "The"        "It"         "The"        "Feel"       "The"       
    ## [131] "A"          "He"         "Pluck"      "Two"        "The"       
    ## [136] "Bring"      "Write"      "Clothes"    "We"         "Port"      
    ## [141] "The"        "Guess"      "A"          "The"        "These"     
    ## [146] "Pure"       "The"        "The"        "Mud"        "The"       
    ## [151] "The"        "A"          "He"         "The"        "The"       
    ## [156] "The"        "The"        "We"         "She"        "The"       
    ## [161] "The"        "At"         "Drop"       "A"          "An"        
    ## [166] "Wood"       "The"        "He"         "A"          "A"         
    ## [171] "Steam"      "The"        "There"      "The"        "Torn"      
    ## [176] "Sunday"     "The"        "The"        "They"       "Add"       
    ## [181] "Acid"       "Fairy"      "Eight"      "The"        "A"         
    ## [186] "Add"        "We"         "There"      "He"         "She"       
    ## [191] "The"        "Corn"       "Where"      "The"        "Sell"      
    ## [196] "The"        "The"        "Bring"      "They"       "Farmers"   
    ## [201] "The"        "The"        "Float"      "A"          "A"         
    ## [206] "The"        "After"      "The"        "He"         "Even"      
    ## [211] "The"        "The"        "The"        "Do"         "Lire"      
    ## [216] "The"        "It"         "Write"      "The"        "The"       
    ## [221] "A"          "Coax"       "Schools"    "The"        "They"      
    ## [226] "The"        "The"        "Jazz"       "Rake"       "Slash"     
    ## [231] "Try"        "They"       "He"         "They"       "The"       
    ## [236] "Whitings"   "Some"       "Jerk"       "A"          "Madam"     
    ## [241] "On"         "The"        "This"       "Add"        "The"       
    ## [246] "The"        "The"        "To"         "The"        "Jump"      
    ## [251] "Yell"       "They"       "Both"       "In"         "The"       
    ## [256] "The"        "Ducks"      "Fruit"      "These"      "Canned"    
    ## [261] "The"        "Carry"      "The"        "We"         "Gray"      
    ## [266] "The"        "High"       "Tea"        "A"          "A"         
    ## [271] "The"        "Find"       "Cut"        "The"        "Look"      
    ## [276] "The"        "Nine"       "The"        "The"        "Soak"      
    ## [281] "The"        "A"          "All"        "ii"         "To"        
    ## [286] "Shape"      "The"        "Hedge"      "Quench"     "Tight"     
    ## [291] "The"        "The"        "The"        "Watch"      "The"       
    ## [296] "The"        "Write"      "His"        "The"        "Tin"       
    ## [301] "Slide"      "The"        "The"        "Pink"       "She"       
    ## [306] "The"        "It"         "Let"        "The"        "The"       
    ## [311] "The"        "The"        "The"        "Paper"      "The"       
    ## [316] "The"        "Screw"      "Time"       "The"        "Men"       
    ## [321] "Fill"       "He"         "We"         "Pack"       "The"       
    ## [326] "The"        "Boards"     "The"        "Glass"      "Bathe"     
    ## [331] "Nine"       "The"        "The"        "The"        "Pages"     
    ## [336] "Try"        "Women"      "The"        "A"          "Code"      
    ## [341] "Most"       "He"         "The"        "Mince"      "The"       
    ## [346] "Let"        "A"          "A"          "Tack"       "Next"      
    ## [351] "Pour"       "Each"       "The"        "The"        "The"       
    ## [356] "Just"       "A"          "Our"        "Brass"      "It"        
    ## [361] "Feed"       "The"        "He"         "The"        "Plead"     
    ## [366] "Better"     "This"       "The"        "He"         "Tend"      
    ## [371] "It"         "Mark"       "Take"       "The"        "North"     
    ## [376] "He"         "Go"         "A"          "Soap"       "That"      
    ## [381] "He"         "A"          "Grape"      "Roads"      "Fake"      
    ## [386] "The"        "Smoke"      "Serve"      "Much"       "The"       
    ## [391] "Heave"      "A"          "It"         "His"        "The"       
    ## [396] "The"        "It"         "Beef"       "Raise"      "The"       
    ## [401] "A"          "Jerk"       "No"         "We"         "The"       
    ## [406] "The"        "Three"      "The"        "No"         "Grace"     
    ## [411] "Nudge"      "The"        "Once"       "A"          "Fasten"    
    ## [416] "A"          "He"         "The"        "The"        "There"     
    ## [421] "Seed"       "Draw"       "The"        "The"        "Hats"      
    ## [426] "The"        "Beat"       "Say"        "The"        "Screen"    
    ## [431] "This"       "The"        "He"         "These"      "The"       
    ## [436] "Twist"      "The"        "The"        "Xew"        "The"       
    ## [441] "They"       "The"        "A"          "Breakfast"  "Bottles"   
    ## [446] "The"        "He"         "Drop"       "The"        "Throw"     
    ## [451] "A"          "The"        "The"        "The"        "The"       
    ## [456] "Turn"       "The"        "The"        "To"         "The"       
    ## [461] "The"        "Dispense"   "The"        "He"         "The"       
    ## [466] "The"        "Fly"        "Thick"      "Birth"      "The"       
    ## [471] "The"        "A"          "The"        "We"         "The"       
    ## [476] "The"        "We"         "The"        "Five"       "A"         
    ## [481] "The"        "Shut"       "The"        "Crack"      "He"        
    ## [486] "Send"       "A"          "They"       "The"        "In"        
    ## [491] "A"          "Oats"       "Their"      "The"        "There"     
    ## [496] "Tuck"       "A"          "We"         "The"        "Take"      
    ## [501] "Shake"      "She"        "The"        "The"        "We"        
    ## [506] "Smile"      "A"          "The"        "Take"       "That"      
    ## [511] "The"        "The"        "Ripe"       "A"          "The"       
    ## [516] "The"        "The"        "This"       "She"        "The"       
    ## [521] "Press"      "Neat"       "The"        "The"        "The"       
    ## [526] "Shake"      "The"        "A"          "His"        "Flax"      
    ## [531] "Hurdle"     "A"          "Even"       "Peep"       "The"       
    ## [536] "Cheap"      "A"          "Flood"      "A"          "The"       
    ## [541] "Those"      "He"         "Dill"       "Down"       "Either"    
    ## [546] "The"        "If"         "At"         "Read"       "Fill"      
    ## [551] "The"        "Clams"      "The"        "The"        "Breathe"   
    ## [556] "It"         "A"          "A"          "A"          "A"         
    ## [561] "Paint"      "The"        "Bribes"     "Trample"    "The"       
    ## [566] "A"          "Footprints" "She"        "A"          "Prod"      
    ## [571] "It"         "The"        "It"         "The"        "Wake"      
    ## [576] "The"        "The"        "The"        "Hold"       "Next"      
    ## [581] "Every"      "He"         "They"       "Drive"      "Keep"      
    ## [586] "Sever"      "Paper"      "Slide"      "Help"       "A"         
    ## [591] "Stop"       "Jerk"       "Slidc"      "The"        "Light"     
    ## [596] "Set"        "Dull"       "A"          "Get"        "Choose"    
    ## [601] "A"          "He"         "There"      "The"        "Greet"     
    ## [606] "When"       "Sweet"      "A"          "A"          "Lush"      
    ## [611] "The"        "The"        "The"        "Sit"        "A"         
    ## [616] "The"        "Green"      "Tea"        "Pitch"      "The"       
    ## [621] "The"        "The"        "A"          "The"        "She"       
    ## [626] "The"        "Loop"       "Plead"      "Calves"     "Post"      
    ## [631] "Tear"       "A"          "A"          "It"         "Crouch"    
    ## [636] "Pack"       "The"        "Fine"       "Poached"    "Bad"       
    ## [641] "Ship"       "Dimes"      "They"       "The"        "The"       
    ## [646] "The"        "The"        "Pile"       "The"        "The"       
    ## [651] "The"        "The"        "A"          "The"        "The"       
    ## [656] "To"         "There"      "Cod"        "The"        "Dunk"      
    ## [661] "Hang"       "Cap"        "The"        "Be"         "Pick"      
    ## [666] "A"          "The"        "The"        "The"        "You"       
    ## [671] "Dots"       "Put"        "The"        "The"        "See"       
    ## [676] "Slide"      "Many"       "We"         "No"         "Dig"       
    ## [681] "The"        "A"          "Green"      "A"          "The"       
    ## [686] "A"          "The"        "The"        "Seven"      "Our"       
    ## [691] "The"        "It"         "One"        "Take"       "The"       
    ## [696] "The"        "The"        "Stop"       "The"        "The"       
    ## [701] "Open"       "Fish"       "Dip"        "Will"       "The"       
    ## [706] "The"        "The"        "He"         "Leave"      "The"       
    ## [711] "A"          "The"        "She"        "A"          "Small"     
    ## [716] "The"        "The"        "A"          "She"        "When"
    ```

    2. All words ending in `ing`.
    
    
    ```r
    ings <- "[a-zA-Z]*ing\\b"
    str_extract_all(sentences, ings, simplify = T) %>%
      as.data.frame() %>%
      filter(V1 != "") %>%
      unlist() %>%
      unique() %>%
      as.character()
    ```
    
    ```
    ##  [1] "spring"    "evening"   "morning"   "winding"   "living"   
    ##  [6] "king"      "Adding"    "making"    "raging"    "playing"  
    ## [11] "sleeping"  "ring"      "glaring"   "sinking"   "dying"    
    ## [16] "Bring"     "lodging"   "filing"    "wearing"   "wading"   
    ## [21] "swing"     "nothing"   "sing"      "painting"  "walking"  
    ## [26] "bring"     "shipping"  "puzzling"  "landing"   "thing"    
    ## [31] "waiting"   "whistling" "timing"    "changing"  "drenching"
    ## [36] "moving"    "working"
    ```

    3. All plurals
    
    
    ```r
    plurals <- "\\b[a-zA-Z]{3,}s\\b"
    str_extract_all(sentences, plurals, simplify = T) %>%
      as.data.frame() %>%
      filter(V1 != "") %>%
      unlist() %>%
      unique() %>%
      as.character()
    ```
    
    ```
    ##   [1] "planks"     "days"       "bowls"      "lemons"     "hogs"      
    ##   [6] "hours"      "stockings"  "helps"      "fires"      "across"    
    ##  [11] "bonds"      "Press"      "useless"    "kittens"    "Sickness"  
    ##  [16] "grass"      "books"      "keeps"      "leads"      "boards"    
    ##  [21] "wheels"     "soldiers"   "makes"      "steps"      "lives"     
    ##  [26] "circus"     "Cars"       "This"       "words"      "weeks"     
    ##  [31] "strokes"    "slices"     "factors"    "parts"      "Always"    
    ##  [36] "costs"      "seems"      "gifts"      "pins"       "gives"     
    ##  [41] "Cats"       "glass"      "Thieves"    "improves"   "orders"    
    ##  [46] "Leaves"     "logs"       "things"     "lists"      "less"      
    ##  [51] "boss"       "contents"   "brass"      "times"      "leaves"    
    ##  [56] "plus"       "eyes"       "problems"   "Clothes"    "events"    
    ##  [61] "Guess"      "tastes"     "thistles"   "poodles"    "this"      
    ##  [66] "stories"    "pencils"    "pirates"    "figures"    "does"      
    ##  [71] "toys"       "actress"    "pipes"      "scraps"     "pills"     
    ##  [76] "burns"      "tales"      "miles"      "players"    "inches"    
    ##  [81] "clothes"    "cobs"       "tacks"      "tongs"      "petals"    
    ##  [86] "compass"    "Farmers"    "wonders"    "hostess"    "loss"      
    ##  [91] "wires"      "taps"       "writes"     "Schools"    "fans"      
    ##  [96] "ribbons"    "ties"       "backs"      "Whitings"   "buyers"    
    ## [101] "rings"      "islands"    "funds"      "gets"       "slides"    
    ## [106] "brothers"   "houses"     "Ducks"      "flavors"    "pears"     
    ## [111] "seats"      "spoils"     "cross"      "binds"      "ruins"     
    ## [116] "shelves"    "needs"      "apples"     "crackers"   "curls"     
    ## [121] "tones"      "fits"       "hops"       "cans"       "clouds"    
    ## [126] "chorus"     "minutes"    "walls"      "discuss"    "takes"     
    ## [131] "brings"     "years"      "sometimes"  "mules"      "records"   
    ## [136] "rays"       "Boards"     "Glass"      "rows"       "edges"     
    ## [141] "Pages"      "lines"      "zones"      "secrets"    "fails"     
    ## [146] "woods"      "piles"      "plans"      "Brass"      "seeds"     
    ## [151] "wanders"    "shares"     "cats"       "winds"      "asks"      
    ## [156] "dress"      "means"      "items"      "Roads"      "ones"      
    ## [161] "heroes"     "cuts"       "ways"       "lingers"    "peas"      
    ## [166] "names"      "news"       "restores"   "drifts"     "cents"     
    ## [171] "Hats"       "robins"     "mats"       "protects"   "coins"     
    ## [176] "rags"       "pants"      "lasts"      "buns"       "Bottles"   
    ## [181] "ashes"      "chairs"     "drapes"     "stems"      "bills"     
    ## [186] "grapes"     "figs"       "sparks"     "glasses"    "limits"    
    ## [191] "priceless"  "lanterns"   "waves"      "Oats"       "eyelids"   
    ## [196] "revives"    "shoes"      "hands"      "friends"    "clowns"    
    ## [201] "mails"      "ends"       "pickles"    "clips"      "says"      
    ## [206] "trinkets"   "Clams"      "blades"     "matters"    "goes"      
    ## [211] "sockets"    "Bribes"     "flames"     "designs"    "Footprints"
    ## [216] "mass"       "outdoors"   "lobes"      "speaks"     "kids"      
    ## [221] "boys"       "tumbles"    "guests"     "runs"       "comes"     
    ## [226] "rocks"      "looks"      "others"     "moves"      "moss"      
    ## [231] "dishes"     "facts"      "flaps"      "Calves"     "waters"    
    ## [236] "miss"       "kits"       "saves"      "eggs"       "nerves"    
    ## [241] "maps"       "Dimes"      "tunes"      "pods"       "amounts"   
    ## [246] "business"   "blocks"     "biscuits"   "branches"   "informs"   
    ## [251] "Dots"       "faults"     "blows"      "gloss"      "seals"     
    ## [256] "troops"     "puts"       "bombs"      "streets"    ""          
    ## [261] "pass"       "chicks"     "sums"       "busses"     "hikes"     
    ## [266] "dogs"       "tropics"    "results"    "holes"      "class"     
    ## [271] "ladies"     "groups"     "nets"       "bricks"     "drinks"    
    ## [276] "frocks"     "changes"    "unless"     "objects"    "sticks"    
    ## [281] "colds"      "trims"      "always"     "restless"   "itches"    
    ## [286] "cuffs"      "kinds"      "cherries"   "stones"     "hearts"    
    ## [291] "requests"   "reads"      "ears"       "grows"      "parades"   
    ## [296] "planes"     "sides"      "batches"    "sheets"     "turns"     
    ## [301] "bushes"     "scores"     "natives"    "fevers"     "Mondays"   
    ## [306] "minds"      "pockets"    "shrubs"     "fields"
    ```

## 10.4.4 Grouped Matches


```r
noun <- "(a|the) ([^ ]+)"
has_noun <- sentences %>%
  str_subset(noun) %>%
  head(10)
has_noun %>%
  str_extract(noun)
```

```
##  [1] "the smooth" "the sheet"  "the depth"  "a chicken"  "the parked"
##  [6] "the sun"    "the huge"   "the ball"   "the woman"  "a helps"
```

```r
has_noun %>%
  str_match(noun)
```

```
##       [,1]         [,2]  [,3]     
##  [1,] "the smooth" "the" "smooth" 
##  [2,] "the sheet"  "the" "sheet"  
##  [3,] "the depth"  "the" "depth"  
##  [4,] "a chicken"  "a"   "chicken"
##  [5,] "the parked" "the" "parked" 
##  [6,] "the sun"    "the" "sun"    
##  [7,] "the huge"   "the" "huge"   
##  [8,] "the ball"   "the" "ball"   
##  [9,] "the woman"  "the" "woman"  
## [10,] "a helps"    "a"   "helps"
```

```r
tibble(sentence = sentences) %>%
  tidyr::extract(
    sentence, c("article", "noun"), "(a|the) ([^ ]+)",
    remove = FALSE
  )
```

```
## # A tibble: 720 x 3
##                                       sentence article    noun
##  *                                       <chr>   <chr>   <chr>
##  1  The birch canoe slid on the smooth planks.     the  smooth
##  2 Glue the sheet to the dark blue background.     the   sheet
##  3      It's easy to tell the depth of a well.     the   depth
##  4    These days a chicken leg is a rare dish.       a chicken
##  5        Rice is often served in round bowls.    <NA>    <NA>
##  6       The juice of lemons makes fine punch.    <NA>    <NA>
##  7 The box was thrown beside the parked truck.     the  parked
##  8 The hogs were fed chopped corn and garbage.    <NA>    <NA>
##  9         Four hours of steady work faced us.    <NA>    <NA>
## 10    Large size in stockings is hard to sell.    <NA>    <NA>
## # ... with 710 more rows
```

### 10.4.4.1 Exercises

1. Find all words that come after a “number” like “one”, “two”, “three” etc. Pull out both the number and the word


```r
nums <- "\\b(one|two|three|four|five|six|seven|eight|nine|ten)\\b ([^ ]+)"
tibble(sentence = sentences) %>%
  tidyr::extract(
    sentence, c("number", "word"), nums,
    remove = FALSE
  ) %>%
  filter(!is.na(number))
```

```
## # A tibble: 22 x 3
##                                        sentence number     word
##                                           <chr>  <chr>    <chr>
##  1  The rope will bind the seven books at once.  seven    books
##  2       The two met while playing on the sand.    two      met
##  3        There are more than two factors here.    two  factors
##  4              Type out three lists of orders.  three    lists
##  5             Two plus seven is less than ten.  seven       is
##  6       Drop the two when you add the figures.    two     when
##  7          There the flood mark is ten inches.    ten  inches.
##  8          We are sure that one war is enough.    one      war
##  9 His shirt was clean but one button was gone.    one   button
## 10      The fight will end in just six minutes.    six minutes.
## # ... with 12 more rows
```

```r
## or

sentences[str_detect(sentences, nums)] %>%
  str_extract_all(nums) %>%
  unlist()
```

```
##  [1] "seven books"   "two met"       "two factors"   "three lists"  
##  [5] "seven is"      "two when"      "ten inches."   "one war"      
##  [9] "one button"    "six minutes."  "ten years"     "two shares"   
## [13] "two distinct"  "five cents"    "two pins"      "five robins." 
## [17] "four kinds"    "three story"   "three inches"  "six comes"    
## [21] "three batches" "two leaves."
```

2. Find all contractions. Separate out the pieces before and after the apostrophe.


```r
contracts <- "([^ ]+)'([^ ])+"
sentences[str_detect(sentences, contracts)] %>%
  str_extract_all(contracts) %>%
  unlist()
```

```
##  [1] "It's"       "man's"      "don't"      "store's"    "workmen's" 
##  [6] "Let's"      "sun's"      "child's"    "king's"     "It's"      
## [11] "don't"      "queen's"    "don't"      "pirate's"   "neighbor's"
```

## 14.4.5 Replacing matches


```r
x <- c("apple", "pear", "banana")
str_replace(x, "[aeiou]", "-")
```

```
## [1] "-pple"  "p-ar"   "b-nana"
```

```r
str_replace_all(x, "[aeiou]", "-")
```

```
## [1] "-ppl-"  "p--r"   "b-n-n-"
```

```r
x <- c("1 house", "2 cars", "3 people")
str_replace_all(x, c("1" = "one", "2" = "two", "3" = "three"))
```

```
## [1] "one house"    "two cars"     "three people"
```

```r
sentences %>% 
  str_replace("([^ ]+) ([^ ]+) ([^ ]+)", "\\1 \\3 \\2") %>% 
  head(5)
```

```
## [1] "The canoe birch slid on the smooth planks." 
## [2] "Glue sheet the to the dark blue background."
## [3] "It's to easy tell the depth of a well."     
## [4] "These a days chicken leg is a rare dish."   
## [5] "Rice often is served in round bowls."
```

### 14.4.5.1 Exercises

1. Replace all forward slashes in a string with backslashes.

```r
test <- "a/b/c/d//e"
writeLines(test)
```

```
## a/b/c/d//e
```

```r
writeLines(str_replace_all(test, "/","\\\\"))
```

```
## a\b\c\d\\e
```

2. Implement a simple version of str_to_lower() using replace_all()


```r
test <- "LOUD NOISES"
str_replace_all(test, c("L" = "l", "O" = "o", "U" = "u", "D" = "d", "N" = "n", "I" = "i", "S" = "s", "E" = "e"))
```

```
## [1] "loud noises"
```

3. Switch the first and last letters in words. Which of those strings are still words?


```r
intersect(str_replace_all(words, "(^\\w)(.*)(\\w$)","\\3\\2\\1"), words)
```

```
##  [1] "a"          "america"    "area"       "dad"        "dead"      
##  [6] "lead"       "read"       "depend"     "god"        "educate"   
## [11] "else"       "encourage"  "engine"     "europe"     "evidence"  
## [16] "example"    "excuse"     "exercise"   "expense"    "experience"
## [21] "eye"        "dog"        "health"     "high"       "knock"     
## [26] "deal"       "level"      "local"      "nation"     "on"        
## [31] "non"        "no"         "rather"     "dear"       "refer"     
## [36] "remember"   "serious"    "stairs"     "test"       "tonight"   
## [41] "transport"  "treat"      "trust"      "window"     "yesterday"
```

## 14.4.6 Splitting


```r
sentences %>%
  head(5) %>% 
  str_split(" ")
```

```
## [[1]]
## [1] "The"     "birch"   "canoe"   "slid"    "on"      "the"     "smooth" 
## [8] "planks."
## 
## [[2]]
## [1] "Glue"        "the"         "sheet"       "to"          "the"        
## [6] "dark"        "blue"        "background."
## 
## [[3]]
## [1] "It's"  "easy"  "to"    "tell"  "the"   "depth" "of"    "a"     "well."
## 
## [[4]]
## [1] "These"   "days"    "a"       "chicken" "leg"     "is"      "a"      
## [8] "rare"    "dish."  
## 
## [[5]]
## [1] "Rice"   "is"     "often"  "served" "in"     "round"  "bowls."
```

```r
"a|b|c|d" %>% 
  str_split("\\|") %>% 
  .[[1]]
```

```
## [1] "a" "b" "c" "d"
```

```r
sentences %>%
  head(5) %>% 
  str_split(" ", simplify = TRUE)
```

```
##      [,1]    [,2]    [,3]    [,4]      [,5]  [,6]    [,7]    
## [1,] "The"   "birch" "canoe" "slid"    "on"  "the"   "smooth"
## [2,] "Glue"  "the"   "sheet" "to"      "the" "dark"  "blue"  
## [3,] "It's"  "easy"  "to"    "tell"    "the" "depth" "of"    
## [4,] "These" "days"  "a"     "chicken" "leg" "is"    "a"     
## [5,] "Rice"  "is"    "often" "served"  "in"  "round" "bowls."
##      [,8]          [,9]   
## [1,] "planks."     ""     
## [2,] "background." ""     
## [3,] "a"           "well."
## [4,] "rare"        "dish."
## [5,] ""            ""
```

```r
fields <- c("Name: Hadley", "Country: NZ", "Age: 35")
fields %>% str_split(": ", n = 2, simplify = TRUE)
```

```
##      [,1]      [,2]    
## [1,] "Name"    "Hadley"
## [2,] "Country" "NZ"    
## [3,] "Age"     "35"
```

```r
x <- "This is a sentence.  This is another sentence."
str_view_all(x, boundary("word"))
```

<!--html_preserve--><div id="htmlwidget-119c2697fd156c433358" style="width:960px;height:auto;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-119c2697fd156c433358">{"x":{"html":"<ul>\n  <li><span class='match'>This<\/span> <span class='match'>is<\/span> <span class='match'>a<\/span> <span class='match'>sentence<\/span>.  <span class='match'>This<\/span> <span class='match'>is<\/span> <span class='match'>another<\/span> <span class='match'>sentence<\/span>.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

```r
str_split(x, " ")[[1]]
```

```
## [1] "This"      "is"        "a"         "sentence." ""          "This"     
## [7] "is"        "another"   "sentence."
```

```r
str_split(x, boundary("word"))[[1]]
```

```
## [1] "This"     "is"       "a"        "sentence" "This"     "is"      
## [7] "another"  "sentence"
```

### 14.4.6.1 Exercises

1. Split up a string like `"apples, pears, and bananas"` into individual components.


```r
x <- "apples, pears, and bananas" 
str_split(x, boundary("word"))[[1]]
```

```
## [1] "apples"  "pears"   "and"     "bananas"
```

2. Why is it better to split up by `boundary("word")` than `" "`?

Multiple spaces in a row will lead to empty strings

3. What does splitting with an empty string ("") do? Experiment, and then read the documentation.


```r
str_split(x, "")
```

```
## [[1]]
##  [1] "a" "p" "p" "l" "e" "s" "," " " "p" "e" "a" "r" "s" "," " " "a" "n"
## [18] "d" " " "b" "a" "n" "a" "n" "a" "s"
```

Splits every character in the string into a new string

# 14.5 Other types of pattern


```r
str_view(fruit, "nana")
```

<!--html_preserve--><div id="htmlwidget-e485cd933c65544a38c3" style="width:960px;height:auto;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-e485cd933c65544a38c3">{"x":{"html":"<ul>\n  <li>apple<\/li>\n  <li>apricot<\/li>\n  <li>avocado<\/li>\n  <li>ba<span class='match'>nana<\/span><\/li>\n  <li>bell pepper<\/li>\n  <li>bilberry<\/li>\n  <li>blackberry<\/li>\n  <li>blackcurrant<\/li>\n  <li>blood orange<\/li>\n  <li>blueberry<\/li>\n  <li>boysenberry<\/li>\n  <li>breadfruit<\/li>\n  <li>canary melon<\/li>\n  <li>cantaloupe<\/li>\n  <li>cherimoya<\/li>\n  <li>cherry<\/li>\n  <li>chili pepper<\/li>\n  <li>clementine<\/li>\n  <li>cloudberry<\/li>\n  <li>coconut<\/li>\n  <li>cranberry<\/li>\n  <li>cucumber<\/li>\n  <li>currant<\/li>\n  <li>damson<\/li>\n  <li>date<\/li>\n  <li>dragonfruit<\/li>\n  <li>durian<\/li>\n  <li>eggplant<\/li>\n  <li>elderberry<\/li>\n  <li>feijoa<\/li>\n  <li>fig<\/li>\n  <li>goji berry<\/li>\n  <li>gooseberry<\/li>\n  <li>grape<\/li>\n  <li>grapefruit<\/li>\n  <li>guava<\/li>\n  <li>honeydew<\/li>\n  <li>huckleberry<\/li>\n  <li>jackfruit<\/li>\n  <li>jambul<\/li>\n  <li>jujube<\/li>\n  <li>kiwi fruit<\/li>\n  <li>kumquat<\/li>\n  <li>lemon<\/li>\n  <li>lime<\/li>\n  <li>loquat<\/li>\n  <li>lychee<\/li>\n  <li>mandarine<\/li>\n  <li>mango<\/li>\n  <li>mulberry<\/li>\n  <li>nectarine<\/li>\n  <li>nut<\/li>\n  <li>olive<\/li>\n  <li>orange<\/li>\n  <li>pamelo<\/li>\n  <li>papaya<\/li>\n  <li>passionfruit<\/li>\n  <li>peach<\/li>\n  <li>pear<\/li>\n  <li>persimmon<\/li>\n  <li>physalis<\/li>\n  <li>pineapple<\/li>\n  <li>plum<\/li>\n  <li>pomegranate<\/li>\n  <li>pomelo<\/li>\n  <li>purple mangosteen<\/li>\n  <li>quince<\/li>\n  <li>raisin<\/li>\n  <li>rambutan<\/li>\n  <li>raspberry<\/li>\n  <li>redcurrant<\/li>\n  <li>rock melon<\/li>\n  <li>salal berry<\/li>\n  <li>satsuma<\/li>\n  <li>star fruit<\/li>\n  <li>strawberry<\/li>\n  <li>tamarillo<\/li>\n  <li>tangerine<\/li>\n  <li>ugli fruit<\/li>\n  <li>watermelon<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

```r
str_view(fruit, regex("nana"))
```

<!--html_preserve--><div id="htmlwidget-fbd00b9700a478776661" style="width:960px;height:auto;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-fbd00b9700a478776661">{"x":{"html":"<ul>\n  <li>apple<\/li>\n  <li>apricot<\/li>\n  <li>avocado<\/li>\n  <li>ba<span class='match'>nana<\/span><\/li>\n  <li>bell pepper<\/li>\n  <li>bilberry<\/li>\n  <li>blackberry<\/li>\n  <li>blackcurrant<\/li>\n  <li>blood orange<\/li>\n  <li>blueberry<\/li>\n  <li>boysenberry<\/li>\n  <li>breadfruit<\/li>\n  <li>canary melon<\/li>\n  <li>cantaloupe<\/li>\n  <li>cherimoya<\/li>\n  <li>cherry<\/li>\n  <li>chili pepper<\/li>\n  <li>clementine<\/li>\n  <li>cloudberry<\/li>\n  <li>coconut<\/li>\n  <li>cranberry<\/li>\n  <li>cucumber<\/li>\n  <li>currant<\/li>\n  <li>damson<\/li>\n  <li>date<\/li>\n  <li>dragonfruit<\/li>\n  <li>durian<\/li>\n  <li>eggplant<\/li>\n  <li>elderberry<\/li>\n  <li>feijoa<\/li>\n  <li>fig<\/li>\n  <li>goji berry<\/li>\n  <li>gooseberry<\/li>\n  <li>grape<\/li>\n  <li>grapefruit<\/li>\n  <li>guava<\/li>\n  <li>honeydew<\/li>\n  <li>huckleberry<\/li>\n  <li>jackfruit<\/li>\n  <li>jambul<\/li>\n  <li>jujube<\/li>\n  <li>kiwi fruit<\/li>\n  <li>kumquat<\/li>\n  <li>lemon<\/li>\n  <li>lime<\/li>\n  <li>loquat<\/li>\n  <li>lychee<\/li>\n  <li>mandarine<\/li>\n  <li>mango<\/li>\n  <li>mulberry<\/li>\n  <li>nectarine<\/li>\n  <li>nut<\/li>\n  <li>olive<\/li>\n  <li>orange<\/li>\n  <li>pamelo<\/li>\n  <li>papaya<\/li>\n  <li>passionfruit<\/li>\n  <li>peach<\/li>\n  <li>pear<\/li>\n  <li>persimmon<\/li>\n  <li>physalis<\/li>\n  <li>pineapple<\/li>\n  <li>plum<\/li>\n  <li>pomegranate<\/li>\n  <li>pomelo<\/li>\n  <li>purple mangosteen<\/li>\n  <li>quince<\/li>\n  <li>raisin<\/li>\n  <li>rambutan<\/li>\n  <li>raspberry<\/li>\n  <li>redcurrant<\/li>\n  <li>rock melon<\/li>\n  <li>salal berry<\/li>\n  <li>satsuma<\/li>\n  <li>star fruit<\/li>\n  <li>strawberry<\/li>\n  <li>tamarillo<\/li>\n  <li>tangerine<\/li>\n  <li>ugli fruit<\/li>\n  <li>watermelon<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

```r
bananas <- c("banana", "Banana", "BANANA")
str_view(bananas, "banana")
```

<!--html_preserve--><div id="htmlwidget-446db3dd05459c729e21" style="width:960px;height:auto;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-446db3dd05459c729e21">{"x":{"html":"<ul>\n  <li><span class='match'>banana<\/span><\/li>\n  <li>Banana<\/li>\n  <li>BANANA<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

```r
str_view(bananas, regex("banana", ignore_case = TRUE))
```

<!--html_preserve--><div id="htmlwidget-924a00c4c174410ef7ce" style="width:960px;height:auto;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-924a00c4c174410ef7ce">{"x":{"html":"<ul>\n  <li><span class='match'>banana<\/span><\/li>\n  <li><span class='match'>Banana<\/span><\/li>\n  <li><span class='match'>BANANA<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

```r
x <- "Line 1\nLine 2\nLine 3"
str_extract_all(x, "^Line")[[1]]
```

```
## [1] "Line"
```

```r
str_extract_all(x, regex("^Line", multiline = TRUE))[[1]]
```

```
## [1] "Line" "Line" "Line"
```

```r
phone <- regex("
  \\(?     # optional opening parens
  (\\d{3}) # area code
  [)- ]?   # optional closing parens, dash, or space
  (\\d{3}) # another three numbers
  [ -]?    # optional space or dash
  (\\d{3}) # three more numbers
  ", comments = TRUE)

str_match("514-791-8141", phone)
```

```
##      [,1]          [,2]  [,3]  [,4] 
## [1,] "514-791-814" "514" "791" "814"
```

```r
microbenchmark::microbenchmark(
  fixed = str_detect(sentences, fixed("the")),
  regex = str_detect(sentences, "the"),
  times = 20
)
```

```
## Unit: microseconds
##   expr     min       lq     mean   median       uq     max neval
##  fixed  96.001 100.1495 119.3887 104.6925 123.0625 245.729    20
##  regex 253.630 256.1985 291.0824 293.1365 299.2605 419.556    20
```

```r
a1 <- "\u00e1"
a2 <- "a\u0301"
c(a1, a2)
```

```
## [1] "á" "a´"
```

```r
a1 == a2
```

```
## [1] FALSE
```

```r
str_detect(a1, fixed(a2))
```

```
## [1] FALSE
```

```r
str_detect(a1, coll(a2))
```

```
## [1] TRUE
```

```r
i <- c("I", "İ", "i", "ı")
i
```

```
## [1] "I" "I" "i" "i"
```

```r
str_subset(i, coll("i", ignore_case = TRUE))
```

```
## [1] "I" "I" "i" "i"
```

```r
str_subset(i, coll("i", ignore_case = TRUE, locale = "tr"))
```

```
## [1] "i" "i"
```

```r
stringi::stri_locale_info()
```

```
## $Language
## [1] "en"
## 
## $Country
## [1] "US"
## 
## $Variant
## [1] ""
## 
## $Name
## [1] "en_US"
```

```r
x <- "This is a sentence."
str_view_all(x, boundary("word"))
```

<!--html_preserve--><div id="htmlwidget-862ff736fc213058cd3a" style="width:960px;height:auto;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-862ff736fc213058cd3a">{"x":{"html":"<ul>\n  <li><span class='match'>This<\/span> <span class='match'>is<\/span> <span class='match'>a<\/span> <span class='match'>sentence<\/span>.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><!--/html_preserve-->

```r
str_extract_all(x, boundary("word"))
```

```
## [[1]]
## [1] "This"     "is"       "a"        "sentence"
```

### 14.5.1 Exercises

1. How would you find all strings containing `\` with `regex()` vs. with `fixed()`?


```r
x <- c("a\\b\\c", "test")
str_detect(x, "\\\\")
```

```
## [1]  TRUE FALSE
```

```r
str_detect(x, fixed("\\"))
```

```
## [1]  TRUE FALSE
```

2. What are the five most common words in `sentences`?


```r
str_extract_all(sentences, boundary("word")) %>%
  unlist() %>%
  str_to_lower() %>%
  tibble() %>%
  set_names("word") %>%
  group_by(word) %>%
  count(sort = TRUE) %>%
  head(5)
```

```
## # A tibble: 5 x 2
## # Groups:   word [5]
##    word     n
##   <chr> <int>
## 1   the   751
## 2     a   202
## 3    of   132
## 4    to   123
## 5   and   118
```

# 14.6 Other uses of regular expressions


```r
apropos("replace")
```

```
## [1] "%+replace%"       "replace"          "replace_na"      
## [4] "setReplaceMethod" "str_replace"      "str_replace_all" 
## [7] "str_replace_na"   "theme_replace"
```

```r
head(dir(pattern = "\\.Rmd$"))
```

```
## [1] "07_19_2017.Rmd"
```

# 14.7 stringi

### 14.7.1 Exercises

1.Find the stringi functions that

  1. Count the number of words  
    `stri_count_words()`  
  2. Find duplicated strings  
    `stri_duplicated()`  
  3. Generate random text.  
    `stri_rand_strings()`
    
2. How do you control the language that stri_sort() uses for sorting?

Using the `local=""` argument
